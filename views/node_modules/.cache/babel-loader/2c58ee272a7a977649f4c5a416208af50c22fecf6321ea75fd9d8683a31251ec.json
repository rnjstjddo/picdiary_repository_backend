{"ast":null,"code":"import React,{useCallback,useEffect,useState}from\"react\";import useCustomDiet from\"../../hooks/useCustomDiet\";import useCustomLogin from\"../../hooks/useCustomLogin\";import{Link,Navigate,useParams}from\"react-router-dom\";import Image from\"react-bootstrap/Image\";import Button from\"react-bootstrap/Button\";import Form from\"react-bootstrap/Form\";import{deleteDiet,getDietEach}from\"../../api/dietApi\";import useCustomMove from\"../../hooks/useCustomMove\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const chooseSwitch=choose=>{switch(choose){case 1:return\"아침\";case 2:return\"점심\";case 3:return\"저녁\";case 4:return\"간식\";default:return\"아침\";}};const initState={content:\"\",//picture: \"\",\ndateobject:\"\",updatedAt:\"\",id:\"\",quantity:0,choose:\"\"};const DietReadComponent=()=>{const[dietParam,setDietParam]=useState([]);const[dietChoose,setDietChoose]=useState(\"\");const[dietId,setDietId]=useState(\"\");const{choose,dateobject}=useParams();const{isLogin}=useCustomLogin();const{moveToLogin}=useCustomMove();const{postDietC,moveToDietRead,moveToDietCreate,deleteDietC,moveToDietList}=useCustomDiet();useEffect(()=>{console.log(\"useEffect isLogin -> \",isLogin);if(!isLogin){alert(\"로그인이 필요합니다.\");return moveToLogin();}//api\nconst getDietEI=async()=>await getDietEach({choose,dateobject}).then(result=>{console.log(\"DietReadComponent.js useEffect 내 getDietEach axios 호출후 then() => \",result);setDietParam(()=>result);setDietId(()=>result[0].DietId);setDietChoose(()=>result[0].choose);console.log(\"DietReadComponent.js useEffect 내 getDietEach axios 호출후 dietParam => \",dietParam);}).catch(err=>{console.log(\"DietReadComponent.js useEffect 내 getDietEach axios 호출후 catch() => \",err);});getDietEI();},[]);const deleteOnClick=()=>{console.log(\"DietReadComponent.js deleteOnClick() 진입 \");deleteDiet({choose,dateobject}).then(result=>{console.log(\"DietReadComponent.js deleteOnClick() then() => \",result);if(result.result===\"success\"){alert(dietParam.dateobject+\"일자의 식단이 삭제되었습니다.\");moveToDietList();}if(result.error===\"error\"){alert(dietParam.dateobject+\"일자의 식단 삭제를 실패했습니다.\");moveToDietRead({dateobject,choose});}}).catch(err=>{console.log(\"DietReadComponent.js deleteOnClick() catch() => \",err);alert(dietParam.dateobject+\"일자의 식단 삭제를 실패했습니다.\");moveToDietRead(dietParam.id);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\uC2DD\\uB2E8\\uC870\\uD68C\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"br\",{}),dietParam&&dietParam.length!==0&&/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uC2DD\\uB2E8\\uC77C\\uC790\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"dateobject\",value:dateobject,disabled:true}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uC2DC\\uAC04\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"content\",value:chooseSwitch(choose),disabled:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uC2DD\\uB2E8\\uB0B4\\uC6A9 / \\uC591(\\uB2E8\\uC704 g/ml)\"}),dietParam.map((d,index)=>/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"content\",value:`${d.content}${d.quantity}`,disabled:true},d.id))]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:`../modify/${dateobject}/${dietChoose}`,children:/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",children:\"\\uC2DD\\uB2E8 \\uC218\\uC815\\uC774\\uB3D9\"})}),\"\\xA0\",/*#__PURE__*/_jsx(Button,{variant:\"outline-danger\",type:\"button\",onClick:()=>deleteOnClick(),children:\"\\uC0AD\\uC81C\\uD558\\uAE30\"}),\"\\xA0\",/*#__PURE__*/_jsx(Link,{to:`../`,children:/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",children:\"\\uC2DD\\uB2E8 \\uB2EC\\uB825\\uC774\\uB3D9\"})})]})}),/*#__PURE__*/_jsx(\"br\",{})]});};export default DietReadComponent;","map":{"version":3,"names":["React","useCallback","useEffect","useState","useCustomDiet","useCustomLogin","Link","Navigate","useParams","Image","Button","Form","deleteDiet","getDietEach","useCustomMove","jsx","_jsx","jsxs","_jsxs","chooseSwitch","choose","initState","content","dateobject","updatedAt","id","quantity","DietReadComponent","dietParam","setDietParam","dietChoose","setDietChoose","dietId","setDietId","isLogin","moveToLogin","postDietC","moveToDietRead","moveToDietCreate","deleteDietC","moveToDietList","console","log","alert","getDietEI","then","result","DietId","catch","err","deleteOnClick","error","className","children","length","Fragment","Group","Label","Control","type","name","value","disabled","Text","map","d","index","to","variant","onClick"],"sources":["C:/Users/win10/Desktop/picdiary/views/src/components/diet/DietReadComponent.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\r\nimport useCustomDiet from \"../../hooks/useCustomDiet\";\r\nimport useCustomLogin from \"../../hooks/useCustomLogin\";\r\nimport { Link, Navigate, useParams } from \"react-router-dom\";\r\nimport Image from \"react-bootstrap/Image\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport { deleteDiet, getDietEach } from \"../../api/dietApi\";\r\nimport useCustomMove from \"../../hooks/useCustomMove\";\r\n\r\nconst chooseSwitch = (choose) => {\r\n  switch (choose) {\r\n    case 1:\r\n      return \"아침\";\r\n    case 2:\r\n      return \"점심\";\r\n    case 3:\r\n      return \"저녁\";\r\n    case 4:\r\n      return \"간식\";\r\n    default:\r\n      return \"아침\";\r\n  }\r\n};\r\n\r\nconst initState = {\r\n  content: \"\",\r\n  //picture: \"\",\r\n  dateobject: \"\",\r\n  updatedAt: \"\",\r\n  id: \"\",\r\n  quantity: 0,\r\n  choose: \"\",\r\n};\r\n\r\nconst DietReadComponent = () => {\r\n  const [dietParam, setDietParam] = useState([]);\r\n  const [dietChoose, setDietChoose] = useState(\"\");\r\n\r\n  const [dietId, setDietId] = useState(\"\");\r\n  const { choose, dateobject } = useParams();\r\n\r\n  const { isLogin } = useCustomLogin();\r\n  const { moveToLogin } = useCustomMove();\r\n  const {\r\n    postDietC,\r\n    moveToDietRead,\r\n    moveToDietCreate,\r\n    deleteDietC,\r\n    moveToDietList,\r\n  } = useCustomDiet();\r\n\r\n  useEffect(() => {\r\n    console.log(\"useEffect isLogin -> \", isLogin);\r\n    if (!isLogin) {\r\n      alert(\"로그인이 필요합니다.\");\r\n\r\n      return moveToLogin();\r\n    }\r\n    //api\r\n    const getDietEI = async () =>\r\n      await getDietEach({ choose, dateobject })\r\n        .then((result) => {\r\n          console.log(\r\n            \"DietReadComponent.js useEffect 내 getDietEach axios 호출후 then() => \",\r\n            result\r\n          );\r\n\r\n          setDietParam(() => result);\r\n          setDietId(() => result[0].DietId);\r\n          setDietChoose(() => result[0].choose);\r\n          console.log(\r\n            \"DietReadComponent.js useEffect 내 getDietEach axios 호출후 dietParam => \",\r\n            dietParam\r\n          );\r\n        })\r\n        .catch((err) => {\r\n          console.log(\r\n            \"DietReadComponent.js useEffect 내 getDietEach axios 호출후 catch() => \",\r\n            err\r\n          );\r\n        });\r\n\r\n    getDietEI();\r\n  }, []);\r\n\r\n  const deleteOnClick = () => {\r\n    console.log(\"DietReadComponent.js deleteOnClick() 진입 \");\r\n\r\n    deleteDiet({ choose, dateobject })\r\n      .then((result) => {\r\n        console.log(\"DietReadComponent.js deleteOnClick() then() => \", result);\r\n        if (result.result === \"success\") {\r\n          alert(dietParam.dateobject + \"일자의 식단이 삭제되었습니다.\");\r\n\r\n          moveToDietList();\r\n        }\r\n        if (result.error === \"error\") {\r\n          alert(dietParam.dateobject + \"일자의 식단 삭제를 실패했습니다.\");\r\n          moveToDietRead({ dateobject, choose });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"DietReadComponent.js deleteOnClick() catch() => \", err);\r\n        alert(dietParam.dateobject + \"일자의 식단 삭제를 실패했습니다.\");\r\n        moveToDietRead(dietParam.id);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <br />\r\n      <br />\r\n\r\n      <h4>식단조회</h4>\r\n      <hr />\r\n      <br />\r\n      {dietParam && dietParam.length !== 0 && (\r\n        <React.Fragment>\r\n          <Form>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>식단일자</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"dateobject\"\r\n                value={dateobject}\r\n                disabled\r\n              />\r\n              <Form.Text className=\"text-muted\"></Form.Text>\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>시간</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                name=\"content\"\r\n                value={chooseSwitch(choose)}\r\n                disabled\r\n              />\r\n            </Form.Group>\r\n            <Form.Group className=\"mb-3\">\r\n              <Form.Label>식단내용 / 양(단위 g/ml)</Form.Label>\r\n              {dietParam.map((d, index) => (\r\n                <Form.Control\r\n                  key={d.id}\r\n                  type=\"text\"\r\n                  name=\"content\"\r\n                  value={`${d.content}${d.quantity}`}\r\n                  disabled\r\n                />\r\n              ))}\r\n            </Form.Group>\r\n            <br />\r\n            <Link to={`../modify/${dateobject}/${dietChoose}`}>\r\n              <Button variant=\"outline-primary\">식단 수정이동</Button>\r\n            </Link>\r\n            &nbsp;\r\n            <Button\r\n              variant=\"outline-danger\"\r\n              type=\"button\"\r\n              onClick={() => deleteOnClick()}\r\n            >\r\n              삭제하기\r\n            </Button>\r\n            &nbsp;\r\n            <Link to={`../`}>\r\n              <Button variant=\"outline-secondary\">식단 달력이동</Button>\r\n            </Link>\r\n          </Form>\r\n        </React.Fragment>\r\n      )}\r\n      <br />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DietReadComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}