{"ast":null,"code":"import{useCallback,useState}from\"react\";import Stack from\"react-bootstrap/Stack\";import Button from\"react-bootstrap/Button\";import Form from\"react-bootstrap/Form\";import KakaoLoginComponent from\"./KakaoLoginComponent\";import useCustomLogin from\"../../hooks/useCustomLogin\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const initState={email:\"\",pw:\"\"};const LoginComponent=()=>{const[loginParam,setLoginParam]=useState({...initState});//useCustomLogin 사용\n// const dispatch = useDispatch();\n// const navigate = useNavigate();\nconst{moveToPath,doLogin,forSession}=useCustomLogin();const handleChange=useCallback(e=>{loginParam[e.target.name]=e.target.value;setLoginParam({...loginParam});},[loginParam]);const handleSubmitLogin=e=>{console.log(\"LoginComponent.js handleSubmitLogin() 진입\");e.preventDefault();//비동기안될경우\n// axios\n//   .post(\"http://localhost:8001/api/member/login\", {\n//     email: loginParam.email,\n//     password: loginParam.pw,\n//   })\n//   .then((result) =>\n//     console.log(\"로그인 axios post then() 결과 -> \", result.data)\n//   )\n//   .catch((err) => console.log(\"로그인 axios post catch()결과 \", err));\n// moveToPath(\"/\");\ndoLogin(loginParam).then(data=>{console.log(\"LoginComponent.js handleClickLogin() loginPostAsync 결과 \",data);if(data.error){alert(\"일치하는 정보가 없거나 회원가입을 해주세요!\");console.log(\"data.error => \",data.error);moveToPath(\"/login\");}else{moveToPath(\"/\");}}).catch(err=>{console.log(\"LoginComponent.js thunk함수 실행결과 catch() 진입 \",err);alert(\"다시 로그인 해주세요!\");moveToPath(\"/login\");});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmitLogin,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uC774\\uBA54\\uC77C\\uC8FC\\uC18C\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",name:\"email\",value:loginParam.email,onChange:handleChange}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uD328\\uC2A4\\uC6CC\\uB4DC\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"pw\",value:loginParam.pw,onChange:handleChange})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"\\uB85C\\uADF8\\uC778\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]});};export default LoginComponent;","map":{"version":3,"names":["useCallback","useState","Stack","Button","Form","KakaoLoginComponent","useCustomLogin","axios","jsx","_jsx","jsxs","_jsxs","initState","email","pw","LoginComponent","loginParam","setLoginParam","moveToPath","doLogin","forSession","handleChange","e","target","name","value","handleSubmitLogin","console","log","preventDefault","then","data","error","alert","catch","err","className","children","onSubmit","Group","Label","Control","type","onChange","Text","variant"],"sources":["C:/Users/win10/Desktop/picdiary/views/src/components/member/LoginComponent.js"],"sourcesContent":["import { useCallback, useState } from \"react\";\r\nimport Stack from \"react-bootstrap/Stack\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport KakaoLoginComponent from \"./KakaoLoginComponent\";\r\nimport useCustomLogin from \"../../hooks/useCustomLogin\";\r\nimport axios from \"axios\";\r\n\r\nconst initState = {\r\n  email: \"\",\r\n  pw: \"\",\r\n};\r\n\r\nconst LoginComponent = () => {\r\n  const [loginParam, setLoginParam] = useState({ ...initState });\r\n\r\n  //useCustomLogin 사용\r\n  // const dispatch = useDispatch();\r\n\r\n  // const navigate = useNavigate();\r\n\r\n  const { moveToPath, doLogin, forSession } = useCustomLogin();\r\n\r\n  const handleChange = useCallback(\r\n    (e) => {\r\n      loginParam[e.target.name] = e.target.value;\r\n      setLoginParam({ ...loginParam });\r\n    },\r\n    [loginParam]\r\n  );\r\n\r\n  const handleSubmitLogin = (e) => {\r\n    console.log(\"LoginComponent.js handleSubmitLogin() 진입\");\r\n    e.preventDefault();\r\n\r\n    //비동기안될경우\r\n    // axios\r\n    //   .post(\"http://localhost:8001/api/member/login\", {\r\n    //     email: loginParam.email,\r\n    //     password: loginParam.pw,\r\n    //   })\r\n    //   .then((result) =>\r\n    //     console.log(\"로그인 axios post then() 결과 -> \", result.data)\r\n    //   )\r\n    //   .catch((err) => console.log(\"로그인 axios post catch()결과 \", err));\r\n    // moveToPath(\"/\");\r\n\r\n    doLogin(loginParam)\r\n      .then((data) => {\r\n        console.log(\r\n          \"LoginComponent.js handleClickLogin() loginPostAsync 결과 \",\r\n          data\r\n        );\r\n\r\n        if (data.error) {\r\n          alert(\"일치하는 정보가 없거나 회원가입을 해주세요!\");\r\n          console.log(\"data.error => \", data.error);\r\n          moveToPath(\"/login\");\r\n        } else {\r\n          moveToPath(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"LoginComponent.js thunk함수 실행결과 catch() 진입 \", err);\r\n        alert(\"다시 로그인 해주세요!\");\r\n        moveToPath(\"/login\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <br />\r\n      <br />\r\n\r\n      <h4>로그인</h4>\r\n      <hr />\r\n      <br />\r\n      <Form onSubmit={handleSubmitLogin}>\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>이메일주소</Form.Label>\r\n          <Form.Control\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={loginParam.email}\r\n            onChange={handleChange}\r\n          />\r\n          <Form.Text className=\"text-muted\"></Form.Text>\r\n        </Form.Group>\r\n\r\n        <Form.Group className=\"mb-3\">\r\n          <Form.Label>패스워드</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            name=\"pw\"\r\n            value={loginParam.pw}\r\n            onChange={handleChange}\r\n          />\r\n        </Form.Group>\r\n\r\n        {/* <Form.Group className=\"mb-3\" >\r\n       <Form.Check type=\"checkbox\" label=\"Check me out\" />\r\n      </Form.Group>  */}\r\n\r\n        <Button variant=\"primary\" type=\"submit\">\r\n          로그인\r\n        </Button>\r\n      </Form>\r\n      {/* <KakaoLoginComponent /> */}\r\n      <br />\r\n      <br />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}